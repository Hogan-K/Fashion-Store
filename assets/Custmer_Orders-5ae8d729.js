import{_ as B,al as y,an as L,ao as N,m as a,ap as d,w as t,q as o,n as j,ar as I,af as Q,aq as u,v as s,as as n,X as m,t as c,y as S,z as U}from"./index-d27a65bb.js";import{V as Y,a as A,b as x,_ as D,c as F}from"./VWindowItem-8051be5e.js";import{V as O}from"./VContainer-2dedb6ad.js";import{V as q,a as W,b as h,c as k,d as C,e as T}from"./VTextField-1bf6c824.js";import{V as z,a as E}from"./VRow-6d4e9fe6.js";import{V as p}from"./VSheet-ba9204a1.js";import{V as v}from"./forwardRefs-c8ca9d16.js";import{V as w}from"./VDivider-98ae2b11.js";import{V as b}from"./VDialog-e87126f6.js";import"./form-6926fc67.js";import"./VMenu-e6431385.js";import"./VAvatar-e3b79868.js";import"./dialog-transition-e92d1505.js";import"./VCheckboxBtn-9db53f42.js";import"./VChip-59ec76c8.js";/* empty css              */const G={name:"Customer-Orders",data(){return{dialog:!1,dialogBill:!0,onboarding:0,btnLoading:!1,Loading:{cart:!1,caption:!1},product:[],QTY:1,noProduct:!1,haveProduct:!0,inputText:""}},methods:{getProduct(l){let i=this;i.Loading.caption=l,y.get(`https://vue-course-api.hexschool.io/api/hogankai/product/${l}`).then(f=>{i.Loading.caption=!1,i.product=f.data.product}),i.dialog=!0},closeDialog(){let l=this;l.dialog=!1},addtoCart(l,i){let f=this,V={product_id:l,qty:i};f.Loading.cart=l,y.post("https://vue-course-api.hexschool.io/api/hogankai/cart",{data:V}).then(e=>{console.log(e),f.Loading.cart=!1,f.QTY=1,f.$store.dispatch("getCarts"),f.dialog=!1})},dialogBillClose(){this.dialogBill=!1}},watch:{inputText(){let l=this;l.filterProducts.length==0?(l.haveProduct=!1,l.noProduct=!0):(l.haveProduct=!0,l.noProduct=!1)}},computed:{...L(["getProductsAll"]),...N(["productsAll"]),filterProducts(){let l=this;return l.productsAll.filter(function(i){return i.title.match(l.inputText)})},cols(){const{sm:l,xs:i}=this.$vuetify.display;return l?[6]:i?[12]:[4]}},created(){this.getProductsAll}},_=l=>(S("data-v-305101af"),l=l(),U(),l),R={class:"imgBox"},X={class:"d-flex justify-space-between"},H=_(()=>s("span",{class:""},"NT",-1)),J=_(()=>s("span",{class:""},"NT",-1)),K=_(()=>s("h1",null,[s("i",{class:"fa-solid fa-circle-exclamation fs-1"},"找不到此商品")],-1)),M={class:"text-end"},Z={class:"d-flex justify-space-between"},$=_(()=>s("span",{class:""},"NT",-1)),ee=_(()=>s("span",{class:""},"NT",-1)),te={class:"mt-6"};function le(l,i,f,V,e,g){return a(),d(O,null,{default:t(()=>[o(W,null,{default:t(()=>[o(q,{density:"compact",variant:"outlined",label:"Search","append-inner-icon":"mdi-magnify",class:"w-50 ms-auto",modelValue:e.inputText,"onUpdate:modelValue":i[0]||(i[0]=r=>e.inputText=r)},null,8,["modelValue"])]),_:1}),e.haveProduct?(a(),d(z,{key:0},{default:t(()=>[(a(!0),j(Q,null,I(g.filterProducts,r=>(a(),d(E,{cols:g.cols[0],key:r.id},{default:t(()=>[o(h,{elevation:"4"},{default:t(()=>[s("div",R,[o(v,{class:"imgTransition",src:`${r.imageUrl}`,cover:"",height:"300"},null,8,["src"])]),o(p,{class:"float-end rounded text-caption ma-2 px-1",color:"grey-darken-2"},{default:t(()=>[c(n(r.category),1)]),_:2},1024),o(k,{class:"text-8F8681"},{default:t(()=>[c(n(r.title),1)]),_:2},1024),o(C,null,{default:t(()=>[s("div",X,[s("div",null,[r.price==r.origin_price?(a(),d(p,{key:0,class:"text-grey-darken-2"},{default:t(()=>[H,c(n(l.$filter.currency(r.origin_price)),1)]),_:2},1024)):u("",!0),r.price!==r.origin_price?(a(),d(p,{key:1,class:"text-grey-lighten-1 text-decoration-line-through"},{default:t(()=>[c(" NT"+n(l.$filter.currency(r.origin_price))+" 元 ",1)]),_:2},1024)):u("",!0)]),s("div",null,[r.price!==r.origin_price?(a(),d(p,{key:0,class:"text-success"},{default:t(()=>[J,c(n(l.$filter.currency(r.price)),1)]),_:2},1024)):u("",!0)])])]),_:2},1024),o(w),o(T,{class:"d-flex justify-space-around"},{default:t(()=>[o(m,{loading:e.Loading.caption==r.id,variant:"outlined",class:"text-8F8681",onClick:P=>g.getProduct(r.id)},{default:t(()=>[c("查看更多 ")]),_:2},1032,["loading","onClick"]),o(m,{loading:e.Loading.cart==r.id,"prepend-icon":"mdi-cart-outline",class:"text-8F8681",variant:"outlined",onClick:P=>g.addtoCart(r.id,1)},{default:t(()=>[c(" 加入購物車 ")]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["cols"]))),128))]),_:1})):u("",!0),e.noProduct?(a(),d(p,{key:1,"min-height":"600",class:"d-flex align-center justify-center bg-brown-lighten-5"},{default:t(()=>[K]),_:1})):u("",!0),o(b,{modelValue:e.dialog,"onUpdate:modelValue":i[3]||(i[3]=r=>e.dialog=r)},{default:t(()=>[o(h,{width:"70%",class:"mx-auto"},{default:t(()=>[o(k,{class:"bg-a67f78 text-white d-flex align-center justify-space-between"},{default:t(()=>[s("p",null,n(e.product.title),1),o(m,{variant:"text",icon:"mdi-close-thick",class:"float-end",onClick:g.closeDialog},null,8,["onClick"])]),_:1}),o(v,{src:e.product.imageUrl,width:"80%",class:"mx-auto my-4"},null,8,["src"]),o(C,null,{default:t(()=>[s("div",null,[s("p",M,n(e.product.description),1),s("p",null,n(e.product.content),1)]),s("div",Z,[s("div",null,[e.product.price==e.product.origin_price?(a(),d(p,{key:0,class:"text-grey-darken-2"},{default:t(()=>[$,c(n(l.$filter.currency(e.product.origin_price)),1)]),_:1})):u("",!0),e.product.price!==e.product.origin_price?(a(),d(p,{key:1,class:"text-red text-decoration-line-through"},{default:t(()=>[c(" NT"+n(l.$filter.currency(e.product.origin_price))+" 元 ",1)]),_:1})):u("",!0)]),s("div",null,[e.product.price!==e.product.origin_price?(a(),d(p,{key:0,class:"text-success"},{default:t(()=>[ee,c(n(l.$filter.currency(e.product.price)),1)]),_:1})):u("",!0)])]),s("div",te,[o(Y,{variant:"solo-filled",label:"選擇數量",items:[1,2,3,4,5,6,7,8,9,10],modelValue:e.QTY,"onUpdate:modelValue":i[1]||(i[1]=r=>e.QTY=r)},null,8,["modelValue"])]),o(w),o(T,null,{default:t(()=>[e.product.price?(a(),d(p,{key:0,class:"ms-auto"},{default:t(()=>[c("小計"+n(l.$filter.currency(e.QTY*e.product.price)),1)]),_:1})):u("",!0),e.product.price?u("",!0):(a(),d(p,{key:1,class:"ms-auto"},{default:t(()=>[c("小計"+n(l.$filter.currency(e.QTY*e.product.origin_price)),1)]),_:1})),o(m,{class:"ml-5","prepend-icon":"mdi-cart-outline",loading:e.Loading.cart==e.product.id,variant:"outlined",onClick:i[2]||(i[2]=r=>g.addtoCart(e.product.id,e.QTY))},{default:t(()=>[c(" 加到購物車 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(b,{modelValue:e.dialogBill,"onUpdate:modelValue":i[5]||(i[5]=r=>e.dialogBill=r)},{default:t(()=>[o(A,{modelValue:e.onboarding,"onUpdate:modelValue":i[4]||(i[4]=r=>e.onboarding=r),"show-arrows":"hover"},{default:t(()=>[o(x,null,{default:t(()=>[o(h,{elevation:"5",class:"d-flex align-center justify-center ma-2 w-100"},{default:t(()=>[o(v,{src:D,class:"position-relative"}),o(m,{icon:"mdi-close",variant:"tonal",class:"position-absolute",style:{top:"2%",right:"2%"},onClick:g.dialogBillClose},null,8,["onClick"])]),_:1})]),_:1}),o(x,null,{default:t(()=>[o(h,{elevation:"2",class:"d-flex align-center justify-center ma-2"},{default:t(()=>[o(v,{src:F,class:"position-relative"}),o(m,{icon:"mdi-close",variant:"tonal",class:"position-absolute",style:{top:"2%",right:"1%"},onClick:g.dialogBillClose},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})}const Ve=B(G,[["render",le],["__scopeId","data-v-305101af"]]);export{Ve as default};
